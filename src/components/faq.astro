---
const faqs = [
  {
    title: "What is Hyperstable?",
    content:
      "Hyperstable ($USDH) is a Crypto-Backed, Over-Collateralized and Decentralized stablecoin that's designed to trade at one US Dollar.",
  },
  {
    title: "Who can benefit?",
    content: `
      There are 3 main actors who can benefit from using Hyperstable:
      <ol>
        <li>1. Borrowers can mint $USDH against supported Collateral Types at competitive rates.</li>
        <li>2. Liquidity Providers can Earn PEG tokens by providing liquidity on Curve, and staking their LP tokens.</li>
        <li>
          3. PEG holders can lock their tokens into vePEG to earn 100% of protocol revenue generated via Interest and Fees from Liquidations, 
          receive Incentives, Vote on Emissions and get protected from dilution via Rebases.
        </li>
      </ol>
    `,
  },
  {
    title: "How can I learn more?",
    content:
      'Please check out our documentation here: <a href="https://hyperstable.gitbook.io/docs" target="_blank" rel="noopener noreferrer">Hyperstable Docs</a>.',
  },
];
---

<div class="mx-auto max-w-4xl divide-y divide-white/10 px-2">
  <dl class="mt-10 space-y-4 divide-y divide-white/10">
    {faqs.map((faq, index) => (
      <div
        id={`faq-${index}`}
        key={`faq-${index}`}
        class="bg-hs-box-bg rounded-lg overflow-hidden"
      >
        <dt class="bg-hs-box-title p-4">
          <button
            type="button"
            class="toggle-button flex w-full items-start justify-between text-left text-white"
            aria-controls={`faq-${index}`}
            aria-expanded="false"
          >
            <span class="text-xl font-semibold text-[#BDE4EB]">
              {faq.title}
            </span>
            <span class="ml-6 flex h-7 items-center">
              <svg
                class="size-6"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                aria-hidden="true"
                data-slot="icon"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M12 6v12m6-6H6"
                />
              </svg>
              <svg
                class="hidden size-6"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                aria-hidden="true"
                data-slot="icon"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M18 12H6"
                />
              </svg>
            </span>
          </button>
        </dt>
        <dd class="p-4 hidden mt-2 pr-12" id={`faq-${index}`}>
          <!-- Render HTML safely -->
          <div class="text-base/7 text-[#BDE4EB]" set:html={faq.content}></div>
        </dd>
      </div>
    ))}
  </dl>
</div>

<script>
  function toggle(button) {
    const icon = button.querySelector("svg");
    const content = button.parentNode.nextElementSibling;

    if (button.getAttribute("aria-expanded") === "true") {
      button.setAttribute("aria-expanded", "false");
      icon.classList.remove("hidden");
      icon.nextElementSibling.classList.add("hidden");
      content.style.display = "none";
    } else {
      button.setAttribute("aria-expanded", "true");
      icon.classList.add("hidden");
      icon.nextElementSibling.classList.remove("hidden");
      content.style.display = "block";
    }
  }

  document.addEventListener("DOMContentLoaded", function () {
    const buttons = document.querySelectorAll(".toggle-button");

    buttons.forEach((button) => {
      button.addEventListener("click", () => {
        toggle(button);
      });
    });

    // Optionally expand the first FAQ by default
    const firstButton = document.querySelector(".toggle-button");
    if (firstButton) {
      toggle(firstButton);
    }
  });
</script>
